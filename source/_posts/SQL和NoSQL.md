---
title: SQL和NoSQL
date: 2017-08-12 11:33:46
tags:
    - SQL
    - NoSQL
categories:
    - 数据库
---
### SQL
结构化查询语言（英语：Structured Query Language，缩写：SQL），是一种特殊目的的编程语言，用于数据库中的标准数据查询语言，是一种基于关系型数据库的语言。关系型数据库是创建在关系模型上的数据库。

关系型数据库代表：SQL Server、Oracle数据库、MySQL。

简单来说，关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。

#### 关系模型中常用的概念：

- 关系：可以理解为一张二维表，每个关系都具有一个关系名，就是通常说的表名

- 元组：可以理解为二维表中的一行，在数据库中经常被称为记录

- 属性：可以理解为二维表中的一列，在数据库中经常被称为字段

- 域：属性的取值范围，也就是数据库中某一列的取值限制

- 关键字：一组可以唯一标识元组的属性，数据库中常称为主键，由一个或多个列组成

- 关系模式：指对关系的描述。其格式为：关系名(属性1，属性2， ... ... ，属性N)，在数据库中成为表结构

#### 关系数据库优点：
- 容易理解：二维表结构是非常贴近逻辑世界的一个概念，关系模型相对网状、层次等其他模型来说更容易理解

- 使用方便：通用的SQL语言使得操作关系型数据库非常方便

- 易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率

#### 关系型数据库瓶颈：

- 高并发读写需求
    网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘I/O是一个很大的瓶颈

- 海量数据的高效率读写
    网站每天产生的数据量是巨大的，对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的

- 高扩展性和可用性
    在基于web的结构当中，数据库是最难进行横向扩展的，当一个应用系统的用户量和访问量与日俱增的时候，数据库却没有办法像web server和app server那样简单的通过添加更多的硬件和服务节点来扩展性能和负载能力。对于很多需要提供24小时不间断服务的网站来说，对数据库系统进行升级和扩展 是非常痛苦的事情，往往需要停机维护和数据迁移。

- 对网站而言很多特性不再需要：
    - 事务一致性
    关系型数据库在对事物一致性的维护中有很大的开销，而现在很多web2.0系统对事物的读写一致性都不高
    
    - 读写实时性
    对关系数据库来说，插入一条数据之后立刻查询，是肯定可以读出这条数据的，但是对于很多web应用来说，并不要求这么高的实时性，比如发一条消息之后，过几秒乃至十几秒之后才看到这条动态是完全可以接受的

    - 复杂SQL，特别是多表关联查询
    任何大数据量的web系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的复杂SQL报表查询，特别是SNS类型的网站，从需求以及产品阶级角度，就避免了这种情况的产生。往往更多的只是单表的主键查询，以及单表的简单条件分页查询，SQL的功能极大的弱化了



在关系型数据库中，导致性能欠佳的最主要原因是多表的关联查询，以及复杂的数据分析类型的复杂SQL报表查询。为了保证数据库的ACID特性，我们 必须尽量按照其要求的范式进行设计，关系型数据库中的表都是存储一个格式化的数据结构。每个元组字段的组成都是一样，即使不是每个元组都需要所有的字段， 但数据库会为每个元组分配所有的字段，这样的结构可以便于标语表之间进行链接等操作，但从另一个角度来说它也是关系型数据库性能瓶颈的一个因素。

### NoSQL
NoSQL泛指非关系型的数据库，强调Key-Value存储，结构不固定。

非关系型数据库提出另一种理念，例如，以键值对存储，且结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，这 样就不会局限于固定的结构，可以减少一些时间和空间的开销。使用这种方式，用户可以根据需要去添加自己需要的字段，这样，为了获取用户的不同信息，不需要 像关系型数据库中，要对多表进行关联查询。仅需要根据id取出相应的value就可以完成查询。但非关系型数据库由于很少的约束，他也不能够提供像SQL 所提供的where这种对于字段属性值情况的查询。并且难以体现设计的完整性。他只适合存储一些较为简单的数据，对于需要进行较复杂查询的数据，SQL数 据库显的更为合适。

非关系型数据库因为其使用K-V存储，所以具有极高的并发读写能力；由于没有固定的结构，所以扩展性强，不需要进行多表查询；同时现在网站很多对事务一致性要求不高，所以可以使用NoSQL数据库存储一些简单的数据，从而提高网站的可用性。

非关系型数据库的数据耦合性弱，可以随时删除任何数据；关系型数据库则要满足数据的一致性，删除数据时有限制。